!function(t){var n={};function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(n){return t[n]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=4)}([function(t,n,e){var i=e(1),r=e(2);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var o={injectType:"singletonStyleTag",insert:("head","head"),singleton:!0};i(r,o);t.exports=r.locals||{}},function(t,n,e){"use strict";var i,r=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},o=function(){var t={};return function(n){if(void 0===t[n]){var e=document.querySelector(n);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}t[n]=e}return t[n]}}(),a=[];function s(t){for(var n=-1,e=0;e<a.length;e++)if(a[e].identifier===t){n=e;break}return n}function c(t,n){for(var e={},i=[],r=0;r<t.length;r++){var o=t[r],c=n.base?o[0]+n.base:o[0],u=e[c]||0,h="".concat(c," ").concat(u);e[c]=u+1;var f=s(h),l={css:o[1],media:o[2],sourceMap:o[3]};-1!==f?(a[f].references++,a[f].updater(l)):a.push({identifier:h,updater:v(l,n),references:1}),i.push(h)}return i}function u(t){var n=document.createElement("style"),i=t.attributes||{};if(void 0===i.nonce){var r=e.nc;r&&(i.nonce=r)}if(Object.keys(i).forEach((function(t){n.setAttribute(t,i[t])})),"function"==typeof t.insert)t.insert(n);else{var a=o(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}return n}var h,f=(h=[],function(t,n){return h[t]=n,h.filter(Boolean).join("\n")});function l(t,n,e,i){var r=e?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(t.styleSheet)t.styleSheet.cssText=f(n,r);else{var o=document.createTextNode(r),a=t.childNodes;a[n]&&t.removeChild(a[n]),a.length?t.insertBefore(o,a[n]):t.appendChild(o)}}function d(t,n,e){var i=e.css,r=e.media,o=e.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),o&&btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var p=null,y=0;function v(t,n){var e,i,r;if(n.singleton){var o=y++;e=p||(p=u(n)),i=l.bind(null,e,o,!1),r=l.bind(null,e,o,!0)}else e=u(n),i=d.bind(null,e,n),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)};return i(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;i(t=n)}else r()}}t.exports=function(t,n){(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=r());var e=c(t=t||[],n);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var i=0;i<e.length;i++){var r=s(e[i]);a[r].references--}for(var o=c(t,n),u=0;u<e.length;u++){var h=s(e[u]);0===a[h].references&&(a[h].updater(),a.splice(h,1))}e=o}}}},function(t,n,e){(n=e(3)(!1)).push([t.i,"",""]),t.exports=n},function(t,n,e){"use strict";t.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var e=function(t,n){var e=t[1]||"",i=t[3];if(!i)return e;if(n&&"function"==typeof btoa){var r=(a=i,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),o=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[e].concat(o).concat([r]).join("\n")}var a,s,c;return[e].join("\n")}(n,t);return n[2]?"@media ".concat(n[2]," {").concat(e,"}"):e})).join("")},n.i=function(t,e,i){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(i)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(r[a]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);i&&r[c[0]]||(e&&(c[2]?c[2]="".concat(e," and ").concat(c[2]):c[2]=e),n.push(c))}},n}},function(t,n,e){"use strict";e.r(n);var i={};e.r(i),e.d(i,"WINDOW_HEIGHT",(function(){return s})),e.d(i,"WINDOW_WIDTH",(function(){return c})),e.d(i,"SNAKE_WIDTH",(function(){return u})),e.d(i,"SNAKE_INITIAL_LENGTH",(function(){return h}));var r={};e.r(r),e.d(r,"UP",(function(){return f})),e.d(r,"DOWN",(function(){return l})),e.d(r,"LEFT",(function(){return d})),e.d(r,"RIGHT",(function(){return p}));var o={};e.r(o),e.d(o,"BOARD_COLOR",(function(){return y})),e.d(o,"SNAKE_BODY_COLOR",(function(){return v})),e.d(o,"SNAKE_BODY_COLOR_1",(function(){return O})),e.d(o,"SNAKE_BODY_COLOR_2",(function(){return b})),e.d(o,"SNAKE_HEAD_COLOR",(function(){return I})),e.d(o,"FOOD_COLOR",(function(){return T}));var a={};e.r(a),e.d(a,"START_BTN_CAPTION",(function(){return m})),e.d(a,"RESTART_BTN_CAPTION",(function(){return g}));var s=160,c=320,u=8,h=3,f="U",l="D",d="L",p="R",y="#e36414",v="#6d597a",O="#b56576",b="#e56b6f",I="#355070",T="#355070",m="START",g="RESTART";function S(t,n){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.x=t*i.SNAKE_WIDTH,this.y=n*i.SNAKE_WIDTH,this.isWrap=e}S.isEqual=function(t,n){return t.x===n.x&&t.y===n.y},S.copy=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new S(t.x,t.y,n)},S.copyExact=function(t){return new S(t.x,t.y,t.isWrap)};var D=S,E=function(t,n,e){return(n-t)*(e-t)<=0};function W(t){return"function"==typeof t}function _(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,i)}return e}function N(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function j(t){return function(t){if(Array.isArray(t))return A(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return A(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return A(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}function x(t){var n=t.initalHeadLocation,e=t.initialTailLocation,o=t.initialDirection,a=t.theme;this.theme=a,this.joints=[n,e],this.dir=o,this.length=x.calculateInitialLengthSnake(n,e),this.alive=!0,this.draw=function(t){var n=this,e=t.canvas;e.beginPath(),this.joints.forEach((function(t,i){if(i!=n.joints.length-1){if(n.joints[i+1].isWrap)return;var r=x.calculatePartDims(t,n.joints[i+1]);e.rect(r.x,r.y,r.width,r.height)}})),e.fillStyle=a.SNAKE_BODY_COLOR,e.fill(),e.beginPath(),e.rect(this.joints[0].x,this.joints[0].y,i.SNAKE_WIDTH,i.SNAKE_WIDTH),e.fillStyle=a.SNAKE_HEAD_COLOR,e.fill()},this.updateTail=function(){var t=this.joints[this.joints.length-1],n=this.joints[this.joints.length-2];t.x===n.x&&t.y<n.y?t.y+=i.SNAKE_WIDTH:t.x===n.x&&t.y>n.y?t.y-=i.SNAKE_WIDTH:t.y===n.y&&t.x<n.x?t.x+=i.SNAKE_WIDTH:t.y===n.y&&t.x>n.x&&(t.x-=i.SNAKE_WIDTH),D.isEqual(t,n)&&(this.joints.pop(),n.isWrap&&this.joints.pop())},this.checkIfFoodEaten=function(t){var n=this.joints[0];return(this.dir===r.UP||this.dir===r.DOWN)&&Math.abs(n.y-t.y)===i.SNAKE_WIDTH&&n.x===t.x||(this.dir===r.LEFT||this.dir===r.RIGHT)&&Math.abs(n.x-t.x)===i.SNAKE_WIDTH&&n.y===t.y},this.updateHeadOnSoftBoundaryHit=function(){var t=this.joints[0],n=t.x/i.SNAKE_WIDTH,e=t.y/i.SNAKE_WIDTH,o=t.x,a=t.y;this.dir===r.UP&&0===e&&(t.isWrap=!0,a=i.WINDOW_HEIGHT),this.dir===r.DOWN&&e+1===i.WINDOW_HEIGHT/i.SNAKE_WIDTH&&(t.isWrap=!0,a=-i.SNAKE_WIDTH),this.dir===r.LEFT&&0===n&&(t.isWrap=!0,o=i.WINDOW_WIDTH),this.dir===r.RIGHT&&n+1===i.WINDOW_WIDTH/i.SNAKE_WIDTH&&(t.isWrap=!0,o=-i.SNAKE_WIDTH),t.isWrap&&(this.joints=[new D(o/i.SNAKE_WIDTH,a/i.SNAKE_WIDTH),new D(o/i.SNAKE_WIDTH,a/i.SNAKE_WIDTH)].concat(j(this.joints)))},this.checkIfPointLiesOnSnake=function(t){var n=this;return this.joints.reduce((function(e,i,r){var o=!1;return r!==n.joints.length-1&&0!==r&&(i.x===n.joints[r+1].x&&t.x===i.x&&!n.joints[r+1].isWrap&&E(t.y,i.y,n.joints[r+1].y)&&(o=!0),i.y===n.joints[r+1].y&&(t.y!==i.y||n.joints[r+1].isWrap||(o=E(t.x,i.x,n.joints[r+1].x)))),e||o}),!1)},this.isEatSelf=function(){var t=this.joints[0];this.checkIfPointLiesOnSnake(t)&&this.stop()},this.update=function(t){var n=t.canvas,e=t.food,o=!1;if(this.alive){(o=this.checkIfFoodEaten(e.location))&&(this.joints[0].x=e.location.x,this.joints[0].y=e.location.y),this.updateHeadOnSoftBoundaryHit(),o||(o=this.checkIfFoodEaten(e.location))&&(this.joints[0].x=e.location.x,this.joints[0].y=e.location.y);var a=this.joints[0];this.dir===r.DOWN?a.y+=i.SNAKE_WIDTH:this.dir===r.UP?a.y-=i.SNAKE_WIDTH:this.dir===r.LEFT?a.x-=i.SNAKE_WIDTH:this.dir===r.RIGHT&&(a.x+=i.SNAKE_WIDTH),this.updateTail(),this.isEatSelf()}return this.draw({canvas:n}),o},this.isDirectionOpposite=function(t){return this.dir===r.DOWN&&t===r.UP||this.dir===r.UP&&t===r.DOWN||this.dir===r.RIGHT&&t===r.LEFT||this.dir===r.LEFT&&t===r.RIGHT},this.turn=function(t){if(!this.isDirectionOpposite(t)&&t!==this.dir){this.dir=t;var n=function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?_(Object(e),!0).forEach((function(n){N(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):_(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}({},this.joints[0]);this.joints=[n].concat(j(this.joints))}},this.stop=function(){this.alive=!1},this.isDead=function(){return!this.alive}}x.calculateInitialLengthSnake=function(t,n){return t.x===n.x?Math.abs(t.y-n.y)/i.SNAKE_WIDTH:Math.abs(t.x-t.y)/i.SNAKE_WIDTH},x.calculatePartDims=function(t,n){return t.x===n.x?t.y>n.y?{x:t.x,y:t.y+i.SNAKE_WIDTH,width:i.SNAKE_WIDTH,height:n.y-t.y}:{x:t.x,y:t.y,width:i.SNAKE_WIDTH,height:n.y-t.y}:t.x>n.x?{x:t.x+i.SNAKE_WIDTH,y:t.y,width:n.x-t.x,height:i.SNAKE_WIDTH}:{x:t.x,y:t.y,width:n.x-t.x,height:i.SNAKE_WIDTH}},x.getStaticInitialConfig=function(){var t=i.SNAKE_INITIAL_LENGTH;return{initalHeadLocation:new D(5,10),initialTailLocation:new D(5,10-t),initialDirection:r.DOWN}};var H=x;function w(t){var n=this,e=t.location,r=t.theme;this.location=e,this.draw=function(t){var e=t.canvas;e.beginPath();var o,a,s,c=n.location.x,u=n.location.y,h=new Path2D((a=u,s=i.SNAKE_WIDTH,"M".concat(o=c," ").concat(a+s/2," L ").concat(o+s/2," ").concat(a," L ").concat(o+s," ").concat(a+s/2," L ").concat(o+s/2," ").concat(a+s," Z")));e.strokeStyle=r.FOOD_COLOR,e.stroke(h),e.fillStyle=r.FOOD_COLOR,e.fill(h)}}w.spawnFood=function(t){var n=i.WINDOW_WIDTH/i.SNAKE_WIDTH,e=i.WINDOW_HEIGHT/i.SNAKE_WIDTH,r=n*e-t.length,o=Math.floor(Math.random()*(r-1)),a=Math.floor((o-1)/n);return new D((o-1)%e,a)};var K=w;function L(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,i)}return e}function P(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?L(Object(e),!0).forEach((function(n){R(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):L(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function R(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var B=function(t){var n=this,e=t.canvas,o=t.theme,a=t.gameUI;this.canvas=e,this.theme=o,this.snake=null,this.food=null,this.score=0,this.gameUI={startBtn:a.startBtn,scoreBoard:a.scoreBoard},this.isValidGame=function(){return this.snake&&this.food&&this.canvas},this.createFood=function(t){return t?new K({location:K.spawnFood(t),theme:n.theme}):null},this.updateFood=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;delete n.food,n.food=e||n.createFood(t)},this.createSnake=function(){var t=H.getStaticInitialConfig();return n.snake=new H(P(P({},t),{},{theme:n.theme})),n.snake},this.setupBasicGameControls=function(t){var n=this;!function(t){var n=t.onUp,e=t.onDown,i=t.onLeft,r=t.onRight,o=t.target;!!o&&o.addEventListener("keydown",(function(t){"ArrowUp"===t.key&&W(n)?n(t):"ArrowDown"===t.key&&W(e)?e(t):"ArrowLeft"===t.key&&W(i)?i(t):"ArrowRight"===t.key&&W(r)&&r(t)}))}({onUp:function(){return n.snake.turn(r.UP)},onDown:function(){return n.snake.turn(r.DOWN)},onLeft:function(){return n.snake.turn(r.LEFT)},onRight:function(){return n.snake.turn(r.RIGHT)},target:t})},this.drawItemsInOneFrame=function(){this.canvas.clearRect(0,0,i.WINDOW_WIDTH,i.WINDOW_HEIGHT),this.food.draw({canvas:this.canvas});var t=this.snake.update({canvas:this.canvas,food:this.food});t&&(this.updateFood(this.snake),this.score+=1,this.throttledDraw.throttleBy+=2,t=!1)},this.paintBoardRAF=function(t){this.isValidGame()&&(this.snake.isDead()&&this.gameUI.startBtn.show(),W(t)&&t(),this.gameUI.scoreBoard.updateScore(this.score)),requestAnimationFrame(this.paintBoardRAF.bind(this,t))},this.setup=function(t){var n=t.target;this.score=0,this.throttledDraw&&(this.throttledDraw.throttleBy=6);var e=this.createSnake();this.updateFood(e),this.setupBasicGameControls(n)},this.startGame=function(t){var n=this,e=t.target;this.gameUI.startBtn.setup({startOnClick:function(){return n.setup({target:e})}});var i,r,o=(i=this.drawItemsInOneFrame.bind(this),(r=function t(){++t.count>=60/t.throttleBy&&(i.apply(void 0,arguments),t.count=0)}).throttleBy=6,r.count=0,r);this.throttledDraw=o,requestAnimationFrame(this.paintBoardRAF.bind(this,o))}};function k(t){t.style.zIndex=-1,t.style.visibility="hidden"}function C(t){this.btnElement=t,this.setCaption=function(t){this.btnElement.innerText=t},this.setup=function(t){var n=this,e=t.startOnClick;this.setCaption(a.START_BTN_CAPTION),this.btnElement&&this.btnElement.addEventListener("click",(function(){W(e)&&e(),k(n.btnElement)}))},this.show=function(){!function(t){t.style.zIndex=1,t.style.visibility="visible"}(this.btnElement),this.setCaption(a.RESTART_BTN_CAPTION)},this.hide=function(){k(this.btnElement)}}C.getStartButton=function(){return C.btn||(C.btn=new C(document.getElementById("start"))),C.btn};var F=C;function U(){this.element=document.getElementById("score-board"),this.getScoreText=function(t){return"Score: ".concat(t)},this.updateScore=function(t){this.element.innerText=this.getScoreText(t)}}U.getScoreBoard=function(){return U.sb||(U.sb=new U),U.sb};var M=U,G=(e(0),F.getStartButton()),q=M.getScoreBoard(),Y=new B({canvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.canvasHeight,e=void 0===n?i.WINDOW_HEIGHT:n,r=t.canvasWidth,o=void 0===r?i.WINDOW_WIDTH:r,a=document.querySelector("canvas");return a.height=e,a.width=o,a.getContext("2d")}(),gameUI:{startBtn:G,scoreBoard:q},theme:o});Y.startGame({target:window,gameObject:Y})}]);
//# sourceMappingURL=bundle.js.map